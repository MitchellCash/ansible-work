---
- name: Install GitLab Runner
  shell: |
    curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash
    sudo apt install gitlab-runner

- name: Install GitLab Runner
  shell: >
    sudo gitlab-runner register
    --non-interactive
    --url "{{ coordinator_url }}"
    --registration-token "{{ registration_token }}"
    --description "{{ description }}"
    {% if gitlab_runner_purpose == 'cd' %}
    --executor shell
    {% endif %}
    {% if gitlab_runner_purpose == 'ci' %}
    --executor docker
    {% endif %}
